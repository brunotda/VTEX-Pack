/**
 * Vtex Pack
 * @version 2.4
 * @author Carlos Vinicius [ QUATRO DIGITAL ]
 * @license MIT
*/

/**
* Vtex Simple Cart
* @author Carlos Vinicius [ QUATRO DIGITAL ]
* @version 3.0
*/
"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});
(function(e){e.fn.simpleCart=jQuery.fn.vtexCart=function(k){var b,h,g,f,l,j;h=function(d,a){"object"===typeof console&&("undefined"!==typeof a&&"alerta"===a.toLowerCase()?console.warn("[Simple Cart] "+d):"undefined"!==typeof a&&"info"===a.toLowerCase()?console.info("[Simple Cart] "+d):console.error("[Simple Cart] "+d))};b=jQuery(this);if(!b.length)return b;e.fn.simpleCart.elements=e.fn.simpleCart.elements.add(b);f=jQuery.extend({cartQtt:".vtex-cartQtt",cartTotal:".vtex-cartTotal",itemsText:".vtex-ItemsText",
callback:function(){}},k);g=jQuery("");b.data("qd_simpleCartOpts",f);l=function(d,a){var c=parseInt(d,10);isNaN(c)?h("O valor obtido para calcular o plural/singular n\u00e3o \u00e9 um n\u00famero!"):1===c?a.hide().filter(".singular").show():a.hide().filter(".plural").show()};j=function(d,a){var c;c=d.find(".amount-items-em").html();1>d.filter(".cartInfoWrapper").length||(a.$this.show(),a.cartTotalE.html(d.find(".total-cart-em").html()),a.cartQttE.html(c),l(c,a.itemsTextE))};e.ajax({url:"/no-cache/QuantidadeItensCarrinho.aspx",
success:function(d){b.each(function(){var a={},c;c=e(this);a.$this=c;a.cartQttE=c.find(f.cartQtt)||g;a.cartTotalE=c.find(f.cartTotal)||g;a.itemsTextE=c.find(f.itemsText)||g;j(e(d),a)})},error:function(){h("N\u00e3o foi poss\u00edvel fazer a requisi\u00e7\u00e3o p/ obter os dados do carrinho.");-1<document.location.host.indexOf("localhost")&&b.show()}});f.callback();return b};e.fn.simpleCart.elements=e("");var j;j=ajaxRequestbuyButtonAsynchronous;ajaxRequestbuyButtonAsynchronous=function(k,b,h,g,f){j.call(this,
k,b,h,g,function(){"function"===typeof f&&f();e.fn.simpleCart.elements.each(function(){var b;b=e(this);b.simpleCart(b.data("qd_simpleCartOpts"))})})}})(jQuery);
/**
 * Newslleter customizada para a plataforma VTEX
 * @author Carlos Vinicius [ QUATRO DIGITAL ]
 * @version 4.1
 * @license MIT
 */
"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});
(function(j){j.fn.vtexNews=j.fn.vtexNews2=function(s){var f,a,n,k;k=function(a,b){"object"===typeof console&&("undefined"!==typeof b&&"alerta"===b.toLowerCase()?console.warn("[VtexNews] "+a):"undefined"!==typeof b&&"info"===b.toLowerCase()?console.info("[VtexNews] "+a):console.error("[VtexNews] "+a))};f=jQuery(this);if(1>f.length)return f;a=jQuery.extend({defaultName:"Digite seu nome...",defaultEmail:"Digite seu e-mail...",nameField:".vtexNewsName",emailField:".vtexNewsEmail",btn:".vtexNewsButton",
elementError:".nv2_messageError",elementSuccess:".nv2_messageSuccess",validationMethod:"popup",getAttr:"alt",setDefaultName:!0,checkNameExist:!0,showInPopup:!0,animation:null,animateSpeed:100,animateDistance:15,animateRepeat:3,animateFieldSuccess:".vtexNewsAnimateFieldSuccess",timeHideSuccessMsg:3E3,successCallback:function(){},submitCallback:function(){}},s);a.showInPopup||(a.validationMethod="div");null!==a.animation?a.validationMethod="animateField":"animateField"==a.validationMethod&&(a.animation=
"leftRight");if("popup"==a.validationMethod&&"function"!==typeof jQuery.fn.vtexPopUp2)return k("O popUp2 n\u00e3o foi encontrado. Adicione o Plugin de PopUp2."),f;n=function(h){var b,d,c;d=0;b=function(){h.animate({left:"-="+a.animateDistance},a.animateSpeed,function(){h.animate({left:"+="+a.animateDistance},a.animateSpeed,function(){d<a.animateRepeat&&b();d++})})};c=function(){h.fadeTo(a.animateSpeed,0.2,function(){h.fadeTo(a.animateSpeed,1,function(){d<a.animateRepeat&&c();d++})})};"leftRight"==
a.animation?b():"blink"==a.animation&&c()};f.each(function(){var h,b,d,c,f,l,m;b=jQuery(this);d=b.find(a.nameField);c=b.find(a.emailField);f=b.find(a.btn);l=b.find(a.elementError);m=b.find(a.elementSuccess);1>d.length&&a.checkNameExist&&k("Campo de nome, n\u00e3o encontrado ("+d.selector+"). Ser\u00e1 atribuido um valor padr\u00e3o.","info");if(1>c.length)return k("Campo de e-mail, n\u00e3o encontrado ("+c.selector+")"),b;if(1>f.length)return k("Bot\u00e3o de envio, n\u00e3o encontrado ("+f.selector+
")"),b;if("animateField"!=a.validationMethod&&(1>m.length||1>l.length))return k("A(s) mensagem(ns) de erro e/ou sucesso esta(m) faltando \n ("+m.selector+", "+l.selector+")"),b;a.setDefaultName&&d.is("input[type=text], textarea")&&d.val(a.defaultName);c.val(a.defaultEmail);var g,p;a.checkNameExist&&(g=d.filter(":visible"),g.length&&(p=g.val(),d.is("input, textarea")&&g.bind({focus:function(){g.val()==p&&(0===g.val().search(a.defaultName.substr(0,6))||a.setDefaultName)&&g.val("")},blur:function(){""===
g.val()&&g.val(p)}})));var q;q=c.val();c.bind({focus:function(){c.val()==q&&0===c.val().search(a.defaultEmail.substr(0,6))&&c.val("")},blur:function(){""===c.val()&&c.val(q)}});h=function(){var e,c,d,g;c=(e=b.find(a.nameField).filter("input[type=text],select,textarea").val())?e:(e=b.find(a.nameField).filter("input[type=radio]:checked, input[type=checkbox]:checked").val())?e:(e=b.find(a.nameField).attr(a.getAttr))?e:(e=b.find(a.nameField).text())?e:(e=b.find(a.nameField).find(".box-banner img:first").attr("alt"))?
e:"Nome_Padrao";e=(b.find(a.emailField).val()||"").trim();d=b.find(a.nameField).is(":visible");d=(1>c.length||0===c.search(a.defaultName.substr(0,6)))&&(a.checkNameExist||d?d:!0);g=0>e.search(/^[a-z0-9\_\-\.]+@[a-z0-9\_\-]+(\.[a-z0-9\_\-]{2,})+$/i);d||g?"animateField"==a.validationMethod?(d&&n(b.find(a.nameField)),g&&n(b.find(a.emailField))):"popup"==a.validationMethod?l.vtexPopUp2({popupType:"newsletter",popupClass:"popupNewsletterError"}):(l.slideDown().bind("click",function(){j(this).slideUp()}),
setTimeout(function(){l.slideUp()},1800)):(f.attr("disabled","disabled"),jQuery.ajax({url:"/no-cache/Newsletter.aspx",type:"POST",data:{newsletterClientEmail:e,newsletterClientName:c,newsInternalCampaign:"newsletter:opt-in",newsInternalPage:(document.location.pathname||"/").replace(/\//g,"_"),newsInternalPart:"newsletter"},success:function(){var c,d,e;f.removeAttr("disabled");"popup"==a.validationMethod?m.vtexPopUp2({popupType:"newsletter",popupClass:"popupNewsletterSuccess"}):"animateField"!=a.validationMethod&&
m.slideDown().bind("click",function(){j(this).slideUp()});e=b.find(a.emailField);a.setDefaultName&&b.find(a.nameField).is("input, textarea")&&b.find(a.nameField).val(a.defaultName);c=function(){e.val(a.defaultEmail)};"animateField"==a.validationMethod?(e.val(b.find(a.animateFieldSuccess).val()||"Obrigado!!!"),e.addClass("vtexNewsSuccess"),d=setTimeout(function(){e.removeClass("vtexNewsSuccess");c();e.unbind("focus.vtexNews")},a.timeHideSuccessMsg),e.bind("focus.vtexNews",function(){e.removeClass("vtexNewsSuccess");
clearTimeout(d);j(this).val("");j(this).unbind("focus.vtexNews")})):c();a.successCallback()}}),a.submitCallback(e,c))};f.bind("click",function(){h()});var r=function(a){if(13==(a.keyCode?a.keyCode:a.which))a.preventDefault(),h()};d.filter("input, textarea").bind("keydown",r);c.bind("keydown",r)});return f}})(jQuery);
/**
* Vtex Gift List
* @author Carlos Vinicius
* @version 1.5
* @date 2012-09-18
*/
jQuery.fn.vtexGiftlist=function(d){var e=jQuery(this);if(1>e.length)return e;var g=jQuery.extend({giftListWrap:".giftListWrap",popupShow:function(){},buyBtnFormat:function(a,c){var f=jQuery('<div class="giftListBtn"></div>'),b=jQuery('<div class="skuTplButtonsWrap"></div>');a.after(b);a.appendTo(b);c.appendTo(f);f.appendTo(b)}},d),d=jQuery("body");jQuery("");var a=d.find(g.giftListWrap),j="object"==typeof console;if(1>a.length)return j&&console.log("Elemento contendo o controle de lista n\u00e3o encontrado ("+
a.selector+")"),!1;var k=a.parent(),i=d.find("div.skuList"),h={actions:function(d){var c=d||e;c.bind("click",function(){var f,b;f=a.find(".giftlistcreate-nouser");a.find(".giftlistinsertsku").show();b=a.find(".giftlistinsertsku-message");if("block"==b.css("display"))return alert(b.text());b.css("display","block").hide();c.hasClass("multipleSkus")&&a.find(".giftlistinsertsku-button").each(function(){var a=jQuery(this),b=(a.attr("href")||"").split(",");b[1]="'"+c.attr("rel")+"'";a.attr("href",b.join(","))});
if(1>f.length)a.vtexPopUp2({initCallback:g.popupShow,closeCallback:function(){a.appendTo(k)}});else return alert("Voc\u00ea precisa estar logado para adicionar um item a lista."),document.location.href="https://"+document.location.host+"/Site/Login.aspx?ReturnUrl="+document.location.pathname,!1})},buyButton:function(){var a=i.find(".buy-button");if(1>a.length||2>i.length)return!1;var c=e.clone().addClass("multipleSkus");a.each(function(){var a=c.clone(),b=jQuery(this);g.buyBtnFormat(b,a);a.attr("rel",
(b.attr("href")||"").split("Sku=").pop());h.actions(a)});e.hide()}};h.actions();h.buyButton();return e};
/**
* Popups
* @author Carlos Vinicius
* @version 1.25
* @date 2012-10-18
*/
jQuery.fn.vtexPopUp2=function(l){var j=jQuery(this);if(1>j.length)return j;var i=jQuery("body"),d=i.find(".boxPopUp2"),k="object"==typeof console;1>d.length&&(d=jQuery('<div class="boxPopUp2"><div class="boxPopUp2-wrap"><span class="boxPopUp2-close"></span><div class="boxPopUp2-content"></div></div></div>'),i.prepend(d),d.after('<div class="boxPopUp2-overlay"></div>'));var c=jQuery.extend({popupType:null,closeContent:null,popupClass:"",quickViewClass:".quickViewLink",contentUrl:"",initCallback:function(){},
showCallback:function(){},closeCallback:function(){}},l),l=d.find(".boxPopUp2-close"),e=d.find(".boxPopUp2-content"),m=i.find(".boxPopUp2-close, .boxPopUp2-overlay"),n=i.find(".boxPopUp2-overlay"),h=jQuery(document);null!=c.closeContent&&l.html(c.closeContent);var b={positioning:function(){var a=h.scrollTop(),b=jQuery(window).height(),c=d.outerHeight(!0);d.css("top",a+(c>=b?20:(b-c)/2)+"px")},show:function(a){a=a||{};n.fadeTo("fast",0.5,function(){d.show().addClass("popupOpened");"boolean"===typeof a.loading&&
!0===a.loading?b.showLoading():b.hideLoading();"function"===typeof a.callback&&a.callback();c.showCallback(d)})},hideLoading:function(){e.filter(":visible").css("background-image","none")},showLoading:function(){e.filter(":visible").css("background-image",'url("/arquivos/ajax-loader.gif")')},close:function(a){var a=a||{},b=function(){n.fadeOut("fast");d.fadeOut("fast",function(){e.empty()});e.attr("class","boxPopUp2-content");d.attr("class","boxPopUp2")};"boolean"==typeof a.closeNow&&!0==a.closeNow&&
b();1>m.filter(".boxPopUp2-clickActive").length&&(m.addClass("boxPopUp2-clickActive").bind("click",function(){"function"===typeof a.clickCallback?a.clickCallback():c.closeCallback(d);b()}),h.bind("keyup",function(a){27==(a.keyCode?a.keyCode:a.which)&&b()}));if(j.hasClass("autoClose")){var g=(j.attr("class")||"").split("ac_").pop().split(" ").shift();if(isNaN(parseFloat(g)))return k&&console.log("[Erro] O tempo informado (em segundos) n\u00e3o \u00e9 um valor num\u00e9rico: \u201c"+g+"\u201d"),!1;
setTimeout(function(){b()},1E3*g)}},setType:function(a){if(a.hasClass("quickViewLink"))b.quickView(a);else if(a.hasClass("giftListWrap"))b.giftList(a);else if(a.hasClass("installmentInfoTpl"))b.paymentForms(a);else if(a.hasClass("shipping-value"))b.calculateShipping(a);else if(a.hasClass("freeContent"))b.freeContent(a);else if(a.hasClass("boxPopUp2"))b.closeNow(a);else if(a.hasClass("referAFriendTpl"))b.productReferAFriend(a);else if(0<a.filter("#btnReferAFriend").length)b.giftListReferFriend(a);
else if(0<a.filter("#lnkPubliqueResenha").length)b.postRatingComment(a);else if(0<a.filter("#palerta").length)b.cartCheckoutAlert(a);else if(a.hasClass("lnkAddPhoto"))c.popupType="minhaContaFoto",b.userAccount(a);else return!1},checkType:function(a){if("cadastroCliente"===c.popupType||"minhaContaFoto"===c.popupType)b.userAccount(a);else if("newsletter"===c.popupType)b.newsletter(a);else if("quickview"===c.popupType)b.quickView(a);else if("giftlist"===c.popupType)b.giftList(a);else if("paymentforms"===
c.popupType)b.paymentForms(a);else if("shipping"===c.popupType)b.calculateShipping(a);else if("string"==typeof c.popupType&&"freecontent"===c.popupType.toLowerCase())b.freeContent(a);else if("closenow"===c.popupType)b.closeNow(a);else if("GiftListReferAFriend"===c.popupType)b.giftListReferFriend(a);else if("postRatingComment"===c.popupType)b.postRatingComment(a);else return!1},exec:function(){j.each(function(){var a=$(this),d;null===c.popupType?d=b.setType(a):!1===b.checkType(a)&&(d=b.setType(a));
!1===d&&b.freeContent(a)});c.initCallback()},userAccount:function(a){var f="";"cadastroCliente"===c.popupType?f="signInPopups":"minhaContaFoto"===c.popupType&&(f="profilePhoto");a.unbind().removeAttr("onclick");var g=a.attr("href")||"";a.bind("mouseenter",function(){a.unbind().bind("click",function(){d.addClass(c.popupClass+" "+f+"Main");""===g&&k&&console.log("N\u00e3o existe URL no atributo href");jQuery('<iframe src="'+g+'" frameborder="0" allowtransparency="true"></iframe>').appendTo(e.addClass(c.popupClass+
" "+f));b.show({loading:!0});b.positioning();b.close();return!1})})},newsletter:function(a){a.clone().appendTo(e.addClass(c.popupClass+" newsletterPopup"));d.addClass(c.popupClass+" newsletterMain");b.show();b.positioning();b.close()},quickView:function(a){var a=i.find(c.quickViewClass),f=function(){a.filter(":not(.quickViewLinkActivated)").addClass("quickViewLinkActivated").bind("click",function(){jQuery('<iframe src="'+jQuery(this).attr("href")+'" frameborder="0" allowtransparency="true"></iframe>').appendTo(e.addClass(c.popupClass+
" productQuickView"));d.addClass(c.popupClass+" quickViewMain");b.show({loading:!0});b.positioning();b.close();return!1})};f();h.ajaxStop(f)},paymentForms:function(a){var f="",g=function(){var a=i.find(".see-other-payment-method-link");if(1>a.length)return k&&console.log("Url das formas de pagamento n\u00e3o encontrado. \n Verifique se o controle esta na p\u00e1gina.\n("+a.selector+")"),!1;f=/http:(.*?)(?=\&)/.exec(a[0].getAttribute("onclick").toString())[0]||"#onclickError"};g();a.bind("click",function(){jQuery("<iframe src='"+
f+"' frameborder='0' allowtransparency='true'></iframe>").appendTo(e.addClass(c.popupClass+" paymentFormsPopup"));d.addClass(c.popupClass+" paymentFormsMain");b.show({loading:!0});b.positioning();b.close();return!1});h.ajaxStop(g)},calculateShipping:function(){h.ajaxStop(function(){var a=i.find("#calculoFrete").children();if(1>a.length)return!1;a.find("span.cep-busca a").attr("target","_blank");a.appendTo(e.addClass(c.popupClass+" shippingCalculationPopup"));d.addClass(c.popupClass+" shippingCalculationMain");
b.show();b.positioning();b.close()})},giftList:function(a){a.appendTo(e.addClass(c.popupClass+" giftListPopup"));d.addClass(c.popupClass+" giftListMain");b.show();b.positioning();b.close({clickCallback:c.closeCallback})},cartCheckoutAlert:function(a){a.appendTo(e.addClass(c.popupClass+" cartCheckoutAlertPopup"));d.addClass(c.popupClass+" cartCheckoutAlertMain");b.show();b.positioning();b.close()},freeContent:function(a){""==c.contentUrl?a.appendTo(e.addClass(c.popupClass+" freeContentPopup")):a.bind("click",
function(){jQuery('<iframe src="'+c.contentUrl+'" frameborder="0" allowtransparency="true"></iframe>').appendTo(e.addClass(c.popupClass+" freeContentPopup"));return!1});d.addClass(c.popupClass+" freeContentMain");b.show();b.positioning();b.close()},closeNow:function(){b.close({closeNow:!0})},giftListReferFriend:function(a){var f=function(){var a=$(this).attr("href");if("undefined"===typeof a||""===a)return k&&console.log("[Erro] Url do popup n\u00e3o encontrada."),!1;e.addClass(c.popupClass+" freeContentPopup").load(a);
d.addClass(c.popupClass+" giftListReferFriendMain");b.show({loading:!0});b.positioning();b.close();return!1},g=function(){a.unbind().bind("mouseenter",function(){a.unbind().bind("click",f)})};g();h.ajaxStop(g)},productReferAFriend:function(a){var f=jQuery('<div class="referAFriendPopUpWrap"></div>');a.bind("click",function(){var a=(jQuery(this).parent().find("#div-referAFriend input").attr("onclick")||"").toString(),a=/\/referAFriend\/Form\/[0-9]+\?/i.exec(a);if(null===a)return alert("Desculpe, n\u00e3o foi poss\u00edvel abrir o formul\u00e1rio."),
!1;f.empty().load(a[0],function(){b.positioning()});f.appendTo(e.addClass(c.popupClass+" freeContentPopup"));d.addClass(c.popupClass+" freeContentMain");b.show();b.positioning();b.close();return!1});h.ajaxStop(function(){0<e.find(".referAFriendPopUpWrap #btnFechar").length&&setTimeout(b.closeNow,1500)})},postRatingComment:function(a){var a=a.filter(":not(.popUpPublishReviewActivated)"),f=!1;if(1>a.length)return!1;a.bind("click",function(){var a=jQuery(this).attr("href")||"";if(""===a)return k&&console.log("[Erro] N\u00e3o foi poss\u00edvel obter os dados para abrir o popup de resenha."),
!1;a=a.split(")").shift().split("(").pop().split(",");if(3!=a.length)return k&&console.log("[Erro] O array com os dados do cliente retornou um valor inesperado."),!1;if(f)return!1;f=!0;jQuery.ajax({url:"/publishuserreviewcomment",type:"POST",data:{productId:a[1],clientId:a[0],categoryId:a[2]},success:function(a){var g=jQuery(a);e.addClass(c.popupClass+" userReviewPopup").html(g);d.addClass(c.popupClass+" userReviewPopupMain");b.show({callback:function(){g.find("#txtTituloResenha:hidden").val("titulo_auto");
var a=e.find("a#rtAvaliacao_A0"),b=function(){a.attr("title",a.find(".filledRatingStar:last").index()+1||0)};a.find("span").bind("mouseenter",b);a.bind("mouseleave",b)}});b.positioning();b.close();f=!1},error:function(){f=!1}});return!1}).addClass("popUpPublishReviewActivated");0==jQuery.fn.vtexPopUp2.data.userReviewCount&&h.ajaxStop(function(){e.hasClass("userReviewPopup")&&0==e.find(".formUserComment").children().length&&b.closeNow()});jQuery.fn.vtexPopUp2.data.userReviewCount++}};b.exec();return j};
jQuery.fn.vtexPopUp2.data={userReviewCount:0};

// AUTOLOADS
$(function(){
	/* Carriho */ $(".cartWrapper").vtexCart();
	/* Gift List */ $(".giftListButtonTpl").vtexGiftlist();
	/* Newsletter */ $(".vtexNewsWrap").vtexNews();
	/* Quickview */ $(".quickViewLink").vtexPopUp2();
	/* Formas de pagamento */ $(".installmentInfoTpl").vtexPopUp2();
	/* Cálculo de frete */ $(".shipping-value").vtexPopUp2();
	/* Inidcar a um amigo (Pág. Listas Gerenciar) */ $("td.giftlist-body-action-sendfriend #btnReferAFriend").vtexPopUp2();
	/* Minha conta - alterar foto */ $("body.minha-conta").find(".lnkAddPhoto").vtexPopUp2();
	/* cadastro */ $("body.cadastro-cliente").find(".thickbox").vtexPopUp2({"popupType":"cadastroCliente"});
	/* Indicar à um amigo (pg. Produto) */ $(".referAFriendTpl").vtexPopUp2();

	$(document).ajaxStop(function(){
		/* Publicar comentário sobre o produto */ $("#lnkPubliqueResenha[href*='javascript']").vtexPopUp2();
		/* Quickview */ $(".quickViewLink").vtexPopUp2();
	});
});